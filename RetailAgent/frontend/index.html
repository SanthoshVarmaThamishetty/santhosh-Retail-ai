<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Santhosh ‚Äì Retail AI Agent</title>

<style>
:root{
--bg:#020617;
--panel:rgba(255,255,255,.04);
--text:white;
--bot:#1e293b;
--name:#38bdf8;
}

.light{
--bg:#f8fafc;
--panel:rgba(255,255,255,.75);
--text:#020617;
--bot:#e2e8f0;
--name:#0f172a;
}

body{
margin:0;
font-family:Segoe UI;
background:var(--bg);
color:var(--text);
height:100vh;
display:flex;
}

#profile,#app{
backdrop-filter:blur(14px);
background:var(--panel);
}

#sidebar{
width:60px;
display:flex;
flex-direction:column;
align-items:center;
padding:12px;
}

#sidebar button{
border:none;
border-radius:50%;
width:42px;
height:42px;
cursor:pointer;
background:#38bdf8;
}

#main{flex:1;display:flex}

#profile{
width:420px;
padding:50px 40px;
border-right:1px solid #1e293b;
}

#hello{font-size:16px;opacity:.7}
#im{font-size:20px;margin-top:4px}

#name{
font-size:48px;
font-weight:700;
color:var(--name);
animation:pop .8s ease;
}

@keyframes pop{
0%{transform:scale(.5);opacity:0}
100%{transform:scale(1);opacity:1}
}

#role{margin-top:10px;font-weight:700;color:#22c55e}

#desc{
margin-top:12px;
font-style:italic;
opacity:.85;
line-height:1.6;
}

#social{
margin-top:25px;
display:flex;
gap:15px;
}

.social{
width:42px;height:42px;border-radius:50%;
background:#38bdf8;
display:flex;align-items:center;justify-content:center;
cursor:pointer;color:black;
}

#chatSide{flex:1;display:flex;justify-content:center;align-items:center}

#app{
width:650px;height:85vh;border-radius:18px;padding:20px;
box-shadow:0 0 40px rgba(0,0,0,.5);
display:flex;flex-direction:column;
}

#chat{flex:1;overflow-y:auto;margin:10px 0}

.msg{margin:12px 0;max-width:80%}

.user{
margin-left:auto;background:#38bdf8;color:black;
padding:10px 14px;border-radius:14px 14px 0 14px;
}

.bot{
background:var(--bot);
padding:12px 14px;border-radius:14px 14px 14px 0;
white-space:pre-wrap;
}

.controls{display:flex;gap:6px}

input{
flex:1;padding:12px;border-radius:10px;
border:1px solid #1e293b;background:transparent;color:var(--text);
}

button{
padding:12px;border:none;border-radius:10px;
background:#38bdf8;cursor:pointer;font-weight:600;
}

.newchat{background:#6366f1}
.upload{background:#0ea5e9;padding:12px;border-radius:10px;cursor:pointer}
.mic{background:#22c55e}

.spinner{
width:16px;height:16px;border:3px solid #475569;
border-top:3px solid white;border-radius:50%;
animation:spin 1s linear infinite;display:inline-block;
}

@keyframes spin{100%{transform:rotate(360deg)}}

.preview{max-width:120px;border-radius:10px;margin-top:6px}

footer{text-align:center;font-size:12px;color:#64748b}
</style>
</head>

<body>

<div id="sidebar">
<button onclick="toggleTheme()">üåó</button>
</div>

<div id="main">

<div id="profile">
<div id="hello">Hello</div>
<div id="im">I'm</div>
<div id="name">Santhosh</div>
<div id="role">AI Engineer</div>

<div id="desc">
This is a Personalized Retail AI Chat Agent demo showcasing Python, Machine Learning,
Vector Embeddings, OpenAI integration and full-stack engineering.
</div>

<div id="social">
<div class="social" onclick="openResume()">üìÑ</div>
<div class="social" onclick="openLinkedIn()">üíº</div>
<div class="social" onclick="openEmail()">‚úâÔ∏è</div>
</div>
</div>

<div id="chatSide">
<div id="app">

<div style="text-align:center">
<h3>Retail AI Assistant</h3>
</div>

<div id="chat"></div>

<div class="controls">

<input id="query" placeholder="Ask something..." onkeydown="if(event.key==='Enter')send()">

<button onclick="send()">Send</button>

<button class="newchat" onclick="newChat()">‚úçÔ∏è New</button>

<label class="upload">
üìé
<input type="file" hidden accept="image/*" onchange="uploadImage(event)">
</label>

<button class="mic" onclick="startMic()">üé§</button>

</div>

<footer>¬© Santhosh Varma</footer>

</div>
</div>
</div>

<script>

const chat=document.getElementById("chat");

chat.innerHTML=localStorage.getItem("history") ||
"<div class='msg bot'>‚ú® Welcome!!</div>";

function save(){localStorage.setItem("history",chat.innerHTML);}

async function send(){

const q=query.value.trim();
if(!q)return;

chat.innerHTML+=`<div class="msg user">${q}</div>`;
query.value="";

const think=document.createElement("div");
think.className="msg bot";
think.innerHTML=`<span class="spinner"></span> AI thinking...`;
chat.appendChild(think);

try{
const res=await fetch("/query?q="+encodeURIComponent(q));
const data=await res.json();
think.remove();
typeWriter(data.answer || "No response");
}catch{
think.innerHTML="Backend not reachable";
}

}

function typeWriter(text){
const div=document.createElement("div");
div.className="msg bot";
chat.appendChild(div);

let i=0;
const t=setInterval(()=>{
div.innerHTML+=text.charAt(i++);
chat.scrollTop=chat.scrollHeight;
if(i>=text.length){clearInterval(t);save();}
},10);
}

function uploadImage(e){

const file=e.target.files[0];
if(!file)return;

const reader=new FileReader();

reader.onload=()=>{

chat.innerHTML+=`
<div class="msg user">
Image uploaded<br>
<img class="preview" src="${reader.result}">
</div>`;

const bot=document.createElement("div");
bot.className="msg bot";
bot.innerHTML=`<span class="spinner"></span> Analyzing image...`;
chat.appendChild(bot);

setTimeout(()=>{
bot.innerHTML="Image received üëç";
save();
},1500);

};

reader.readAsDataURL(file);
}

function startMic(){
const r=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
r.start();
r.onresult=e=>query.value=e.results[0][0].transcript;
}

function newChat(){
chat.innerHTML="<div class='msg bot'>‚ú® Welcome!!.</div>";
save();
}

function toggleTheme(){document.body.classList.toggle("light");}

function openResume(){window.open("resume.pdf","_blank")}
function openLinkedIn(){window.open("https://www.linkedin.com/in/santosh-t-b053073b1/","_blank")}
function openEmail(){window.location="mailto:santhoshvarmat1997@gmail.com"}

</script>

</body>
</html>
